<main class="container bg-white shadow-sm my-3">
    <!-- main content start -->
    <div class="h-100 py-3">
        <!-- header starts -->
        <%= link_to sanitize("&larr; Back to listings"), listings_path %>
        <div class="p-3 header d-flex justify-content-between align-items-center mt-2 fw-bold">
            <h1 class="h2 card-title"><%= @listing.title %></h1>
            <small>
                <div>
                    <%= link_to '#', class: "me-2 text-dark" do %>
                        <i class="bi bi-share fs-6"></i>
                        Share
                    <% end %>
                    <%= link_to '#', class: "text-dark" do %>
                        <i class="bi bi-heart-fill text-danger fs-6"></i>
                        Unfavourite
                    <% end %>
                </div>
            </small>
        </div>
        <!-- header ends -->
        <!-- listing image starts -->
        <div class="row mb-4">
            <div class="col-md-6">
                <%= image_tag 'apartment1.jpg', class: 'listing-show-img rounded-1' %>
            </div>
            <div class="col-md-6 mb-0 pb-0">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <div class="card  border-0 text-bg-dark">
                            <%= image_tag 'apartment2.jpg', class: 'card-img' %>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="card border-0 text-bg-dark">
                            <%= image_tag 'apartment3.jpg', class: 'card-img' %>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="card border-0 text-bg-dark">
                            <%= image_tag 'apartment4.jpg', class: 'card-img' %>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card border-0 text-bg-dark">
                            <%= image_tag 'apartment1.jpg', class: 'card-img' %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- listing image ends -->

        <!-- listing body starts -->
        <div class="row listing-body">
            <div class="col-md-8">
                <h5><i class="bi bi-geo-alt-fill"></i> <%= @listing.listing_type.capitalize %> in City, Country</h5>

                <h5 class="mt-4 mb-2">
                    About this listing
                </h5>
                <div class="p-4 border rounded">
                    <% if @listing.about.present? %>
                        <p>
                            <%= simple_format(@listing.about) %>
                        </p>
                    <% end %>
                </div>

                <h5 class="mt-4 mb-2">
                    Suitable for
                </h5>
                <div class="p-4 border rounded">
                    <% if @listing.suitabilities.present? %>
                        <h6>Suitable for</h6>
                        <ul>
                            <% @listing.suitabilities.each do |suitability| %>
                                <li><%= suitability.name.capitalize %></li>
                            <% end %>
                        </ul>
                    <% end %>
                </div>

                <h5 class="mt-4 mb-2">
                    Facilities and Amenities
                </h5>
                <div class="p-4 border rounded">
                    <div class="row">
                        <!-- listing facilities -->
                        <div class="col-md-6">
                            <% if @listing.facilities.present? %>
                                <h6>Facilities</h6>
                                <ul>
                                    <% @listing.facilities.each do |facility| %>
                                        <li><%= facility.name.capitalize %></li>
                                    <% end %>
                                </ul>
                            <% end %>
                        </div>

                        <!-- listing amenities -->
                        <div class="col-md-6">
                            <% if @listing.amenities.present? %>
                                <h6>Amenities</h6>
                                <ul>
                                    <% @listing.amenities.each do |amenity| %>
                                        <li><%= amenity.name.capitalize %></li>
                                    <% end %>
                                </ul>
                            <% end %>
                        </div>
                    </div>
                </div>

                <!-- render listing rooms if present -->
                <% if @listing.rooms.present? %>
                    <h5 class="mt-4 mb-2">
                        Rooms
                    </h5>
                    <div class="row">
                        <% @listing.rooms.each do |room| %>
                            <div class="col-md-4">
                                
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title"><h6><%= room.room_type %></h6></h5>
                                        <% if room.beds.present? %>
                                            <hr>
                                            <ul>
                                                <% room.beds.each do |bed| %>
                                                    <li><%= bed.bed_size %> bed</li>
                                                <% end %>
                                            </ul>
                                        <% end %>
                                    </div>
                                </div>
                            </div>
                        <% end %>
                    </div>
                <% end %>
            </div>

            <div class="col-md-4">
                <div class="card shadow">
                    <div class="card-body p-4">
                        <h5 class="card-title">$10</h5>
                        <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                        <%= link_to 'Check availability', '#', class: "btn btn-lg btn-dark w-100" %>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--  main content ends -->
</main>